目标：理解html、css、js的加载过程

### 一个网页在浏览器中是如何被渲染的？

1. html ---> DOM、  css ---> CSSOM
    * 通过http请求回来的首先是html文本。
    * html文本会从一个`字节流---> 字符流`。在浏览器端拿到的实际上是一个字符流。
    * 浏览器的 html parser 经过`词法分析`，将相应的字符--->token。将这些token不断的添加到DOM树中。
    * html解析的特点：**从上到下**进行词法分析，DOM树就是由从下到下的词法分析的过程中，通过生成的token逐渐生成的。
    * 在这个过程中，可能会遇到相应的资源标签如link、script，此时浏览器就会**并发地**像 webserver 或者 cdn 请求相关的静态资源。
    * 请求回来的 css 资源，再对 css 进行解析---> cssOM
    * DOM + cssOM 结合----> render tree ---> layout ----> paint
    * 请求回来的 js 资源，会由浏览器的 v8 引擎执行。

理解网页在浏览器中如何渲染，是浏览器渲染层面进行前端优化的基础。

2. 特点：
    * 顺序执行、并发加载
        * 顺序执行就是指，词法分析是**从上到下**进行的
        * 并发加载就是指 css、js等这些外部资源在浏览器中是**并发地**加载的。
          并发度是受浏览器并发数量限制的。
    * 是否阻塞（重要）
    * 依赖关系
        * 是指html在渲染的过程中，是否存在并遵循了正确的依赖关系。
        * css代码要在什么地方引入？避免页面闪动问题
          有时候 html 页面出来，css样式并没有加载完成，会出现闪动一下样式加载完成的情况。
          这种情况是因为没有遵循好依赖关系，如果把css放到 head 中的话，那么整个页面的渲染就会等待css加载完并生成cssOM后，与 DOM 树 整合成 render tree之后才会进行页面的渲染。这样渲染出来的页面才会是带有样式的。就不会出现css闪动的问题。
        * js 的执行顺序是否有依赖关系？
          有时可以通过 script 标签的 async 属性，让 js 异步加载，从而不阻塞DOM的渲染。
          但 async 的本质是放弃了 js 之间的依赖关系，它的原理是：哪个 js 先加载完就先执行哪个。

          （默认情况下，html 会按照从上到下的顺序来加载并执行脚本，在脚本加载&执行的过程中，会阻塞后续DOM的渲染。）
    * 引入方式   
        * css 使用 link 引入与 import 引入的区别？哪种更优？
        * js 的引入方式：普通引入、async 引入、defer 引入、动态引入（对于现代化前端非常重要） 












