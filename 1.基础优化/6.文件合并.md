### 文件合并

### 不合并的话，有什么缺点？
1. 请求与请求之间有插入的上行请求，增加了 n-1 个网络延迟
2. 受丢包问题影响更严重
3. 经过代码服务器时可能会被断开

### 合并文件存在的问题
1. 首屏渲染的问题
    * 当我们在进行文件合并的时候，合并之后的资源显示会比合并之前的大，那么在渲染的时候，则整个页面的渲染就要等到整个资源被请求回来之后才能渲染，如果这个资源过大，请求过慢，则会影响整个首屏的渲染的效率。

    * vue、react 等框架，如果在没有使用服务端渲染的情况下，它的渲染过程通常是由框架来接管的。那么它的渲染过程必须要等到框架代码执行完之后才能进行渲染，如果这个框架代码被一个非常大的js 合并在一起了，这样的话，就会有首屏渲染的问题。

2. 缓存大面积失效的问题
    * 使用 md5 戳来唯一标识 资源是否发生变化
    * 如果不合并，改动其中一个资源，并不会影响其他资源的变化，从而更不会引起缓存大面积的失效。只会引起当前改动的资源的缓存失效。
    * 如果合并之后，改动任何一个，都会引起其他一起合并的资源的缓存也失效。也就引起了缓存大面积失效的问题。

以上这两点是在进行文件合并的时候，重点要考量的点。

所以，对于文件合并，有以下三个建议

### 文件合并建议
1. 公共库合并
    * 公共资源库单独打包
2. 不同页面资源分别打包
    * SPA，不能将所有的页面合并成一个进行打包
    * 应该是将不同页面的js 单独打包，
    * （当路由到某个页面的时候，才去加载那个组件，以及页面对应的js文件）

3. 见机行事，随机应变

### 如何进行文件合并
1. 使用在线网站
2. 使用 nodejs

现在的构建工具基本都能够很好的完成文件合并的工作，如gulp、webpack、fis3（构建流程清晰、易上手）等

如果没有构建工具，对于现在的前端开发来说，非常不方便，vue官网是推荐大家使用 webpack 构建工具。

fis3 也是一个非常好的前端工程化的实现，非常有借鉴意义，它与webpack不同。可以在模板渲染阶段进行资源的按需加载，能力非常强大。它是百度内部使用的一款构建工具，它是结合前端构建与服务端构建的一个工程化的方案。

可以自行学习下fis3的构建原理与流程。

构建工具： webpack、gulp、fis3、grunt等...

了解这些构建工具的原理或者至少知道它们之间的区别。










